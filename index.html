<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PC Performance Tester Extreme üöÄ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.02); }
        }

        .running-test {
            animation: pulse 1.5s infinite;
        }

        .test-card {
            transition: all 0.3s ease;
        }

        .test-card:hover {
            transform: translateY(-5px);
        }

        #keyTest {
            display: grid;
            grid-template-columns: repeat(13, 1fr);
            gap: 4px;
            max-width: 900px;
            margin: 0 auto;
        }

        .key-btn {
            padding: 10px 4px;
            border: 2px solid #4B5563;
            border-radius: 6px;
            background: #1F2937;
            color: white;
            font-size: 11px;
            text-align: center;
            transition: all 0.2s;
            cursor: default;
            user-select: none;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .key-pressed {
            background: #10B981 !important;
            border-color: #059669 !important;
            transform: scale(0.95);
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.5);
        }

        .key-working {
            background: #10B981;
            border-color: #059669;
        }

        .port-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
            transition: all 0.3s;
        }

        .port-connected {
            background: #10B981;
            box-shadow: 0 0 10px #10B981;
        }

        .port-disconnected {
            background: #6B7280;
        }

        #vanta-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #374151;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8B5CF6, #EC4899);
            transition: width 0.3s;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            #keyTest {
                grid-template-columns: repeat(10, 1fr);
            }
            .key-btn {
                padding: 8px 2px;
                font-size: 9px;
                min-height: 35px;
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <!-- Custom Navbar -->
    <nav class="bg-gradient-to-r from-gray-900 to-gray-800 px-6 py-4 shadow-lg">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
            <div class="flex items-center space-x-2 mb-4 md:mb-0">
                <i data-feather="zap" class="text-purple-400"></i>
                <span class="text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent">
                    PC Tester Extreme
                </span>
            </div>
            <ul class="flex space-x-6">
                <li><a href="#" class="flex items-center space-x-1 hover:text-purple-400 transition"><i data-feather="home" class="w-4 h-4"></i><span>Home</span></a></li>
                <li><a href="#" class="flex items-center space-x-1 hover:text-purple-400 transition"><i data-feather="info" class="w-4 h-4"></i><span>About</span></a></li>
                <li><a href="#" class="flex items-center space-x-1 hover:text-purple-400 transition"><i data-feather="bar-chart-2" class="w-4 h-4"></i><span>Results</span></a></li>
            </ul>
        </div>
    </nav>

    <div id="vanta-bg"></div>
    
    <main class="container mx-auto px-4 py-8 flex-grow">
        <!-- Hero Section -->
        <section class="text-center mb-16">
            <h1 class="text-5xl md:text-6xl font-bold mb-4 bg-gradient-to-r from-purple-400 via-pink-500 to-red-500 bg-clip-text text-transparent">
                PC Performance Tester Extreme üöÄ
            </h1>
            <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                Ki·ªÉm tra to√†n di·ªán hi·ªáu su·∫•t PC, Laptop v√† Mobile v·ªõi c√°c benchmark chuy√™n nghi·ªáp
            </p>
        </section>

        <!-- Performance Tests -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <i data-feather="activity" class="inline w-8 h-8 text-purple-500"></i>
                Ki·ªÉm Tra Hi·ªáu Su·∫•t
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- CPU Test -->
                <div class="test-card bg-gray-800 rounded-xl p-6 shadow-lg border border-purple-500/30 hover:border-purple-500/60">
                    <div class="text-5xl mb-3 text-center">üî•</div>
                    <h3 class="text-xl font-bold mb-2 text-center">CPU Benchmark</h3>
                    <p class="text-gray-400 text-sm mb-4 text-center">Ki·ªÉm tra hi·ªáu su·∫•t x·ª≠ l√Ω</p>
                    <button onclick="startCPUTest()" class="w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 px-4 py-3 rounded-lg font-semibold transition shadow-lg">
                        B·∫Øt ƒê·∫ßu Test
                    </button>
                    <div class="progress-bar hidden" id="cpu-progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="mt-4 text-center">
                        <div class="text-4xl font-bold text-purple-400" id="cpu-score">-</div>
                        <div class="text-xs text-gray-500">ƒëi·ªÉm CPU</div>
                    </div>
                </div>

                <!-- GPU Test -->
                <div class="test-card bg-gray-800 rounded-xl p-6 shadow-lg border border-blue-500/30 hover:border-blue-500/60">
                    <div class="text-5xl mb-3 text-center">üéÆ</div>
                    <h3 class="text-xl font-bold mb-2 text-center">GPU Benchmark</h3>
                    <p class="text-gray-400 text-sm mb-4 text-center">Ki·ªÉm tra ƒë·ªì h·ªça WebGL</p>
                    <button onclick="startGPUTest()" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 px-4 py-3 rounded-lg font-semibold transition shadow-lg">
                        B·∫Øt ƒê·∫ßu Test
                    </button>
                    <div class="progress-bar hidden" id="gpu-progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="mt-4 text-center">
                        <div class="text-4xl font-bold text-blue-400" id="gpu-score">-</div>
                        <div class="text-xs text-gray-500">ƒëi·ªÉm GPU</div>
                    </div>
                </div>

                <!-- Memory Test -->
                <div class="test-card bg-gray-800 rounded-xl p-6 shadow-lg border border-green-500/30 hover:border-green-500/60">
                    <div class="text-5xl mb-3 text-center">üíæ</div>
                    <h3 class="text-xl font-bold mb-2 text-center">Memory Test</h3>
                    <p class="text-gray-400 text-sm mb-4 text-center">Ki·ªÉm tra t·ªëc ƒë·ªô RAM</p>
                    <button onclick="startMemoryTest()" class="w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 px-4 py-3 rounded-lg font-semibold transition shadow-lg">
                        B·∫Øt ƒê·∫ßu Test
                    </button>
                    <div class="progress-bar hidden" id="memory-progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="mt-4 text-center">
                        <div class="text-4xl font-bold text-green-400" id="memory-score">-</div>
                        <div class="text-xs text-gray-500">ƒëi·ªÉm Memory</div>
                    </div>
                </div>

                <!-- Internet Test -->
                <div class="test-card bg-gray-800 rounded-xl p-6 shadow-lg border border-cyan-500/30 hover:border-cyan-500/60">
                    <div class="text-5xl mb-3 text-center">üåê</div>
                    <h3 class="text-xl font-bold mb-2 text-center">Internet Speed</h3>
                    <p class="text-gray-400 text-sm mb-4 text-center">ƒêo t·ªëc ƒë·ªô m·∫°ng</p>
                    <button onclick="startInternetTest()" class="w-full bg-gradient-to-r from-cyan-600 to-cyan-700 hover:from-cyan-700 hover:to-cyan-800 px-4 py-3 rounded-lg font-semibold transition shadow-lg">
                        B·∫Øt ƒê·∫ßu Test
                    </button>
                    <div class="progress-bar hidden" id="internet-progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="mt-4 text-center">
                        <div class="text-2xl font-bold text-cyan-400" id="download-speed">- Mbps</div>
                        <div class="text-xs text-gray-500">Download Speed</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- AnTuTu Score -->
        <section class="mb-16">
            <div class="bg-gradient-to-br from-orange-500/20 via-red-500/20 to-pink-500/20 rounded-2xl p-8 border border-orange-500/30 shadow-2xl">
                <h2 class="text-4xl font-bold mb-4 text-center flex items-center justify-center">
                    <i data-feather="award" class="w-10 h-10 mr-3 text-orange-400"></i>
                    AnTuTu Benchmark Score
                </h2>
                <div class="text-center">
                    <div class="text-7xl font-bold bg-gradient-to-r from-orange-400 to-red-500 bg-clip-text text-transparent mb-2" id="antutu-score">0</div>
                    <div class="text-gray-400 mb-6 text-lg">T·ªïng ƒëi·ªÉm AnTuTu Benchmark</div>
                    <button onclick="calculateAntutuScore()" class="bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 px-10 py-4 rounded-xl font-bold text-xl transition shadow-lg transform hover:scale-105">
                        üèÜ T√≠nh ƒêi·ªÉm AnTuTu
                    </button>
                    <div class="mt-6 text-sm text-gray-400">
                        <p>ƒêi·ªÉm AnTuTu ƒë∆∞·ª£c t√≠nh d·ª±a tr√™n: CPU √ó 50 + GPU √ó 80 + Memory √ó 30</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Keyboard Test -->
        <section class="mb-16">
            <div class="bg-gray-800 rounded-2xl p-8 border border-gray-700 shadow-xl">
                <h2 class="text-3xl font-bold mb-6 flex items-center justify-center">
                    <i data-feather="keyboard" class="w-8 h-8 mr-3 text-yellow-400"></i>
                    Test B√†n Ph√≠m (PC/Laptop)
                </h2>
                <p class="text-gray-400 mb-6 text-center">Nh·∫•n c√°c ph√≠m tr√™n b√†n ph√≠m ƒë·ªÉ ki·ªÉm tra ho·∫°t ƒë·ªông</p>
                <div id="keyTest" class="mb-6"></div>
                <div class="flex justify-center gap-4 mb-6">
                    <button onclick="resetKeyTest()" class="bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg transition flex items-center">
                        <i data-feather="refresh-cw" class="w-4 h-4 mr-2"></i>
                        Reset Test
                    </button>
                </div>
                <div class="text-center text-lg">
                    <span class="text-green-400 font-bold text-2xl" id="keys-working">0</span>
                    <span class="text-gray-400"> ph√≠m ho·∫°t ƒë·ªông / </span>
                    <span class="text-yellow-400 font-bold text-2xl" id="keys-total">47</span>
                    <span class="text-gray-400"> t·ªïng ph√≠m</span>
                </div>
            </div>
        </section>

        <!-- Speaker Test -->
        <section class="mb-16">
            <div class="bg-gray-800 rounded-2xl p-8 border border-gray-700 shadow-xl">
                <h2 class="text-3xl font-bold mb-6 flex items-center justify-center">
                    <i data-feather="volume-2" class="w-8 h-8 mr-3 text-blue-400"></i>
                    Test Loa / Audio
                </h2>
                <p class="text-gray-400 mb-6 text-center">Ki·ªÉm tra loa v√† √¢m thanh c·ªßa thi·∫øt b·ªã</p>
                <div class="bg-gray-900 rounded-xl p-6 mb-6">
                    <video id="audioTest" controls class="w-full rounded-lg shadow-lg mb-4" style="max-width: 800px; margin: 0 auto; display: block;">
                        <source src="video.mp4" type="video/mp4">
                        Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ video.
                    </video>
                    <p class="text-center text-sm text-gray-500">L∆∞u √Ω: Vui l√≤ng th√™m file video.mp4 v√†o c√πng th∆∞ m·ª•c ho·∫∑c video s·∫Ω kh√¥ng ph√°t ƒë∆∞·ª£c</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <button onclick="testLeftSpeaker()" class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 px-6 py-4 rounded-xl transition flex items-center justify-center shadow-lg">
                        <i data-feather="volume-1" class="w-5 h-5 mr-2"></i>
                        Test Loa Tr√°i
                    </button>
                    <button onclick="testBothSpeakers()" class="bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 px-6 py-4 rounded-xl transition flex items-center justify-center shadow-lg">
                        <i data-feather="volume-2" class="w-5 h-5 mr-2"></i>
                        Test C·∫£ Hai
                    </button>
                    <button onclick="testRightSpeaker()" class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 px-6 py-4 rounded-xl transition flex items-center justify-center shadow-lg">
                        <i data-feather="volume-1" class="w-5 h-5 mr-2"></i>
                        Test Loa Ph·∫£i
                    </button>
                </div>
                <div class="bg-gray-900 rounded-xl p-4">
                    <label class="block mb-2 font-semibold flex items-center">
                        <i data-feather="sliders" class="w-4 h-4 mr-2 text-purple-400"></i>
                        √Çm l∆∞·ª£ng: <span id="volumeValue" class="ml-2 text-purple-400">50%</span>
                    </label>
                    <input type="range" id="volumeControl" min="0" max="100" value="50" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
                </div>
            </div>
        </section>

        <!-- Port Test -->
        <section class="mb-16">
            <div class="bg-gray-800 rounded-2xl p-8 border border-gray-700 shadow-xl">
                <h2 class="text-3xl font-bold mb-6 flex items-center justify-center">
                    <i data-feather="wifi" class="w-8 h-8 mr-3 text-green-400"></i>
                    Test C·ªïng K·∫øt N·ªëi
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-gray-900 p-6 rounded-xl border border-gray-700">
                        <div class="flex items-center mb-3">
                            <span class="port-indicator" id="usb-indicator"></span>
                            <span class="font-semibold text-lg">USB Devices</span>
                        </div>
                        <div id="usb-devices" class="text-sm text-gray-400">Ch∆∞a qu√©t...</div>
                    </div>
                    <div class="bg-gray-900 p-6 rounded-xl border border-gray-700">
                        <div class="flex items-center mb-3">
                            <span class="port-indicator" id="bluetooth-indicator"></span>
                            <span class="font-semibold text-lg">Bluetooth</span>
                        </div>
                        <div id="bluetooth-status" class="text-sm text-gray-400">Ch∆∞a qu√©t...</div>
                    </div>
                    <div class="bg-gray-900 p-6 rounded-xl border border-gray-700">
                        <div class="flex items-center mb-3">
                            <span class="port-indicator port-connected" id="network-indicator"></span>
                            <span class="font-semibold text-lg">Network Connection</span>
                        </div>
                        <div id="network-status" class="text-sm text-gray-400">Ch∆∞a qu√©t...</div>
                    </div>
                    <div class="bg-gray-900 p-6 rounded-xl border border-gray-700">
                        <div class="flex items-center mb-3">
                            <span class="port-indicator" id="audio-indicator"></span>
                            <span class="font-semibold text-lg">Audio Devices</span>
                        </div>
                        <div id="audio-devices" class="text-sm text-gray-400">Ch∆∞a qu√©t...</div>
                    </div>
                </div>
                <div class="text-center">
                    <button onclick="checkPorts()" class="bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 px-8 py-3 rounded-xl transition font-semibold shadow-lg flex items-center mx-auto">
                        <i data-feather="search" class="w-5 h-5 mr-2"></i>
                        Qu√©t T·∫•t C·∫£ C·ªïng
                    </button>
                </div>
            </div>
        </section>

        <!-- Internet Speed Details -->
        <section class="mb-16">
            <div class="bg-gray-800 rounded-2xl p-8 border border-gray-700 shadow-xl">
                <h2 class="text-3xl font-bold mb-6 flex items-center justify-center">
                    <i data-feather="trending-up" class="w-8 h-8 mr-3 text-cyan-400"></i>
                    Chi Ti·∫øt T·ªëc ƒê·ªô Internet
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-gradient-to-br from-green-500/20 to-green-600/20 p-8 rounded-xl border border-green-500/30 text-center">
                        <div class="text-5xl mb-3">‚¨áÔ∏è</div>
                        <div class="text-sm text-gray-400 mb-2">Download Speed</div>
                        <div class="text-4xl font-bold text-green-400" id="download-detail">0 Mbps</div>
                    </div>
                    <div class="bg-gradient-to-br from-blue-500/20 to-blue-600/20 p-8 rounded-xl border border-blue-500/30 text-center">
                        <div class="text-5xl mb-3">‚¨ÜÔ∏è</div>
                        <div class="text-sm text-gray-400 mb-2">Upload Speed</div>
                        <div class="text-4xl font-bold text-blue-400" id="upload-detail">0 Mbps</div>
                    </div>
                    <div class="bg-gradient-to-br from-purple-500/20 to-purple-600/20 p-8 rounded-xl border border-purple-500/30 text-center">
                        <div class="text-5xl mb-3">‚ö°</div>
                        <div class="text-sm text-gray-400 mb-2">Ping / Latency</div>
                        <div class="text-4xl font-bold text-purple-400" id="ping-detail">0 ms</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- System Info -->
        <section class="mb-16">
            <div class="bg-gray-800 rounded-2xl p-8 border border-gray-700 shadow-xl">
                <h2 class="text-3xl font-bold mb-6 flex items-center justify-center">
                    <i data-feather="cpu" class="w-8 h-8 mr-3 text-indigo-400"></i>
                    Th√¥ng Tin H·ªá Th·ªëng
                </h2>
                <div id="system-info" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
            </div>
        </section>
    </main>

    <!-- Custom Footer -->
    <footer class="bg-gradient-to-r from-gray-900 to-gray-800 text-gray-400 py-8 px-6 border-t border-gray-700 mt-auto">
        <div class="container mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p class="text-sm">&copy; 2025 PC Performance Tester Extreme. All rights reserved.</p>
                </div>
                <div class="flex flex-wrap justify-center gap-6">
                    <a href="#" class="hover:text-purple-400 transition flex items-center space-x-1">
                        <i data-feather="github" class="w-4 h-4"></i>
                        <span>GitHub</span>
                    </a>
                    <a href="#" class="hover:text-purple-400 transition flex items-center space-x-1">
                        <i data-feather="twitter" class="w-4 h-4"></i>
                        <span>Twitter</span>
                    </a>
                    <a href="#" class="hover:text-purple-400 transition flex items-center space-x-1">
                        <i data-feather="mail" class="w-4 h-4"></i>
                        <span>Contact</span>
                    </a>
                    <a href="#" class="hover:text-purple-400 transition flex items-center space-x-1">
                        <i data-feather="shield" class="w-4 h-4"></i>
                        <span>Privacy</span>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Initialize Feather Icons
        feather.replace();

        // Initialize Vanta.js Background
        window.addEventListener('load', function() {
            if (typeof VANTA !== 'undefined' && typeof THREE !== 'undefined') {
                VANTA.NET({
                    el: "#vanta-bg",
                    mouseControls: true,
                    touchControls: true,
                    gyroControls: false,
                    minHeight: 200.00,
                    minWidth: 200.00,
                    scale: 1.00,
                    scaleMobile: 1.00,
                    color: 0x7e22ce,
                    backgroundColor: 0x111827,
                    points: 12.00,
                    maxDistance: 22.00,
                    spacing: 18.00
                });
            }
            
            // Initialize system info and ports
            getSystemInfo();
            checkPorts();
            initKeyboard();
            initVolumeControl();
        });

        // System Info
        function getSystemInfo() {
            const ua = navigator.userAgent;
            const info = {
                'Platform': navigator.platform,
                'CPU Cores': navigator.hardwareConcurrency || 'N/A',
                'Device Memory': navigator.deviceMemory ? navigator.deviceMemory + ' GB' : 'N/A',
                'Language': navigator.language,
                'Online Status': navigator.onLine ? '‚úÖ Online' : '‚ùå Offline',
                'Cookies': navigator.cookieEnabled ? '‚úÖ Enabled' : '‚ùå Disabled',
                'Screen Resolution': `${screen.width} √ó ${screen.height}`,
                'Color Depth': screen.colorDepth + ' bit',
                'Timezone': Intl.DateTimeFormat().resolvedOptions().timeZone
            };
            
            const infoDiv = document.getElementById('system-info');
            infoDiv.innerHTML = Object.entries(info).map(([key, value]) => 
                `<div class="bg-gray-900 p-4 rounded-lg border border-gray-700">
                    <div class="text-xs text-gray-500 mb-1">${key}</div>
                    <div class="text-sm font-semibold text-gray-200 break-words">${value}</div>
                </div>`
            ).join('');
        }

        // Helper function for delays
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // CPU Test
        async function startCPUTest() {
            const btn = event.target;
            const progressBar = document.getElementById('cpu-progress-bar');
            const progressFill = progressBar.querySelector('.progress-fill');
            
            btn.classList.add('running-test');
            btn.disabled = true;
            btn.textContent = 'ƒêang Test...';
            progressBar.classList.remove('hidden');
            
            // Animate progress
            for (let i = 0; i <= 100; i += 5) {
                progressFill.style.width = i + '%';
                await sleep(30);
            }
            
            const startTime = performance.now();
            let result = 0;
            
            // Prime number calculation
            for (let i = 0; i < 1000000; i++) {
                if (isPrime(i)) result++;
            }
            
            const duration = performance.now() - startTime;
            const score = Math.round(50000 / duration);
            
            document.getElementById('cpu-score').textContent = score;
            btn.classList.remove('running-test');
            btn.disabled = false;
            btn.textContent = 'B·∫Øt ƒê·∫ßu Test';
            progressBar.classList.add('hidden');
            progressFill.style.width = '0%';
            
            feather.replace();
            return score;
        }

        function isPrime(num) {
            if (num <= 1) return false;
            if (num <= 3) return true;
            if (num % 2 === 0 || num % 3 === 0) return false;
            for (let i = 5; i * i <= num; i += 6) {
                if (num % i === 0 || num % (i + 2) === 0) return false;
            }
            return true;
        }

        // GPU Test using Three.js
        let scene, camera, renderer, cube;
        async function startGPUTest() {
            const btn = event.target;
            const progressBar = document.getElementById('gpu-progress-bar');
            const progressFill = progressBar.querySelector('.progress-fill');

            btn.classList.add('running-test');
            btn.disabled = true;
            btn.textContent = 'ƒêang Test...';
            progressBar.classList.remove('hidden');

            // Animate progress
            for (let i = 0; i <= 100; i += 5) {
                progressFill.style.width = i + '%';
                await sleep(30);
            }

            // Create temporary canvas for GPU test
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 512;
            document.body.appendChild(canvas);

            const startTime = performance.now();
            let frameCount = 0;
            const fpsArray = [];

            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, canvas.width / canvas.height, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ canvas: canvas });
            renderer.setSize(canvas.width, canvas.height);

            const geometry = new THREE.BoxGeometry();
            const material = new THREE.MeshBasicMaterial({ color: 0x00ff00, wireframe: true });
            cube = new THREE.Mesh(geometry, material);
            scene.add(cube);

            camera.position.z = 5;

            const animate = () => {
                requestAnimationFrame(animate);
                cube.rotation.x += 0.01;
                cube.rotation.y += 0.01;
                renderer.render(scene, camera);
                frameCount++;
                if (frameCount % 60 === 0) {
                    const fps = 60 / (performance.now() - startTime) * 1000;
                    fpsArray.push(fps);
                }
                if (frameCount < 300) { // Run for 5 seconds at 60fps
                    requestAnimationFrame(animate);
                } else {
                    const avgFps = fpsArray.reduce((a, b) => a + b, 0) / fpsArray.length;
                    const score = Math.round(avgFps * 100);
                    document.getElementById('gpu-score').textContent = score;
                    canvas.remove();
                    btn.classList.remove('running-test');
                    btn.disabled = false;
                    btn.textContent = 'B·∫Øt ƒê·∫ßu Test';
                    progressBar.classList.add('hidden');
                    progressFill.style.width = '0%';
                    feather.replace();
                    return score;
                }
            };
            animate();
        }

        // Memory Test
        async function startMemoryTest() {
            const btn = event.target;
            const progressBar = document.getElementById('memory-progress-bar');
            const progressFill = progressBar.querySelector('.progress-fill');

            btn.classList.add('running-test');
            btn.disabled = true;
            btn.textContent = 'ƒêang Test...';
            progressBar.classList.remove('hidden');

            // Animate progress
            for (let i = 0; i <= 100; i += 5) {
                progressFill.style.width = i + '%';
                await sleep(50);
            }

            const startTime = performance.now();
            let totalSize = 0;
            const arrays = [];

            try {
                for (let i = 0; i < 100; i++) {
                    const array = new Uint8Array(1024 * 1024); // 1MB each
                    arrays.push(array);
                    totalSize += 1024 * 1024;
                    // Fill with random data
                    for (let j = 0; j < array.length; j++) {
                        array[j] = Math.random() * 255;
                    }
                    await sleep(10);
                }
            } catch (e) {
                console.warn('Memory limit reached:', e);
            }

            const duration = performance.now() - startTime;
            const score = Math.round((totalSize / 1024 / 1024) / (duration / 1000) * 1000); // MB/s * 1000 for score

            // Clean up
            arrays.length = 0;

            document.getElementById('memory-score').textContent = score;
            btn.classList.remove('running-test');
            btn.disabled = false;
            btn.textContent = 'B·∫Øt ƒê·∫ßu Test';
            progressBar.classList.add('hidden');
            progressFill.style.width = '0%';
            feather.replace();
            return score;
        }

        // Internet Test (simulated, in real use external API like speedtest.net)
        async function startInternetTest() {
            const btn = event.target;
            const progressBar = document.getElementById('internet-progress-bar');
            const progressFill = progressBar.querySelector('.progress-fill');

            btn.classList.add('running-test');
            btn.disabled = true;
            btn.textContent = 'ƒêang Test...';
            progressBar.classList.remove('hidden');

            // Animate progress
            for (let i = 0; i <= 100; i += 5) {
                progressFill.style.width = i + '%';
                await sleep(100);
            }

            // Simulate download speed test
            const startTime = performance.now();
            const image = new Image();
            image.src = 'https://httpbin.org/image/png'; // Small image for test
            await new Promise((resolve) => {
                image.onload = () => {
                    const duration = performance.now() - startTime;
                    const sizeMB = 0.01; // Approximate size
                    const speed = (sizeMB * 8) / (duration / 1000); // Mbps
                    document.getElementById('download-speed').textContent = Math.round(speed * 10) / 10 + ' Mbps';
                    document.getElementById('download-detail').textContent = Math.round(speed * 10) / 10 + ' Mbps';
                    resolve();
                };
                image.onerror = () => {
                    document.getElementById('download-speed').textContent = 'Error';
                    resolve();
                };
            });

            // Simulate upload
            const uploadData = new Blob([new ArrayBuffer(1024 * 1024)]); // 1MB
            const formData = new FormData();
            formData.append('file', uploadData);
            const uploadStart = performance.now();
            try {
                await fetch('https://httpbin.org/post', {
                    method: 'POST',
                    body: formData
                });
                const uploadDuration = performance.now() - uploadStart;
                const uploadSpeed = (1 * 8) / (uploadDuration / 1000); // Mbps
                document.getElementById('upload-detail').textContent = Math.round(uploadSpeed * 10) / 10 + ' Mbps';
            } catch (e) {
                document.getElementById('upload-detail').textContent = 'Error';
            }

            // Simulate ping
            const pingStart = performance.now();
            await fetch('https://httpbin.org/delay/1'); // 1s delay
            const pingDuration = performance.now() - pingStart;
            document.getElementById('ping-detail').textContent = Math.round(pingDuration) + ' ms';

            btn.classList.remove('running-test');
            btn.disabled = false;
            btn.textContent = 'B·∫Øt ƒê·∫ßu Test';
            progressBar.classList.add('hidden');
            progressFill.style.width = '0%';
            feather.replace();
        }

        // AnTuTu Score
        function calculateAntutuScore() {
            const cpu = parseInt(document.getElementById('cpu-score').textContent) || 0;
            const gpu = parseInt(document.getElementById('gpu-score').textContent) || 0;
            const mem = parseInt(document.getElementById('memory-score').textContent) || 0;
            const antutu = Math.round((cpu * 50) + (gpu * 80) + (mem * 30));
            document.getElementById('antutu-score').textContent = antutu;
        }

        // Keyboard Test
        const keyMap = {
            'Backquote': '`', 'Digit1': '1', 'Digit2': '2', 'Digit3': '3', 'Digit4': '4', 'Digit5': '5',
            'Digit6': '6', 'Digit7': '7', 'Digit8': '8', 'Digit9': '9', 'Digit0': '0', 'Minus': '-', 'Equal': '=',
            'Backspace': 'Bksp', 'Tab': 'Tab', 'KeyQ': 'Q', 'KeyW': 'W', 'KeyE': 'E', 'KeyR': 'R', 'KeyT': 'T',
            'KeyY': 'Y', 'KeyU': 'U', 'KeyI': 'I', 'KeyO': 'O', 'KeyP': 'P', 'BracketLeft': '[', 'BracketRight': ']',
            'Backslash': '\\', 'CapsLock': 'Caps', 'KeyA': 'A', 'KeyS': 'S', 'KeyD': 'D', 'KeyF': 'F',
            'KeyG': 'G', 'KeyH': 'H', 'KeyJ': 'J', 'KeyK': 'K', 'KeyL': 'L', 'Semicolon': ';', 'Quote': "'",
            'Enter': 'Enter', 'ShiftLeft': 'Shift', 'KeyZ': 'Z', 'KeyX': 'X', 'KeyC': 'C', 'KeyV': 'V',
            'KeyB': 'B', 'KeyN': 'N', 'KeyM': 'M', 'Comma': ',', 'Period': '.', 'Slash': '/', 'ShiftRight': 'Shift',
            'ControlLeft': 'Ctrl', 'AltLeft': 'Alt', 'Space': 'Space', 'AltRight': 'Alt', 'ControlRight': 'Ctrl'
        };

        function initKeyboard() {
            const keyTest = document.getElementById('keyTest');
            Object.keys(keyMap).forEach(code => {
                const btn = document.createElement('div');
                btn.className = 'key-btn';
                btn.textContent = keyMap[code];
                btn.dataset.code = code;
                keyTest.appendChild(btn);
            });
            updateKeyCount();
        }

        document.addEventListener('keydown', (e) => {
            const btn = document.querySelector(`[data-code="${e.code}"]`);
            if (btn) {
                btn.classList.add('key-pressed', 'key-working');
                setTimeout(() => btn.classList.remove('key-pressed'), 150);
                updateKeyCount();
            }
        });

        function updateKeyCount() {
            const working = document.querySelectorAll('.key-working').length;
            document.getElementById('keys-working').textContent = working;
        }

        function resetKeyTest() {
            document.querySelectorAll('.key-working').forEach(btn => btn.classList.remove('key-working'));
            updateKeyCount();
        }

        // Speaker Test using Web Audio API
        let audioContext;
        function initAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function testLeftSpeaker() {
            initAudioContext();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            const panner = audioContext.createStereoPanner();
            panner.pan.value = -1; // Left
            oscillator.connect(panner);
            panner.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            oscillator.start();
            setTimeout(() => oscillator.stop(), 1000);
        }

        function testBothSpeakers() {
            initAudioContext();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            oscillator.start();
            setTimeout(() => oscillator.stop(), 1000);
        }

        function testRightSpeaker() {
            initAudioContext();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            const panner = audioContext.createStereoPanner();
            panner.pan.value = 1; // Right
            oscillator.connect(panner);
            panner.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            oscillator.start();
            setTimeout(() => oscillator.stop(), 1000);
        }

        function initVolumeControl() {
            const volumeControl = document.getElementById('volumeControl');
            const volumeValue = document.getElementById('volumeValue');
            if (audioContext) {
                volumeControl.addEventListener('input', (e) => {
                    const volume = e.target.value / 100;
                    audioContext.destination.gain.value = volume; // Global volume
                    volumeValue.textContent = Math.round(volume * 100) + '%';
                });
            } else {
                volumeControl.addEventListener('input', (e) => {
                    volumeValue.textContent = e.target.value + '%';
                });
            }
        }

        // Port Test (limited browser API)
        function checkPorts() {
            // USB (requires user permission)
            if ('usb' in navigator) {
                navigator.usb.getDevices().then(devices => {
                    document.getElementById('usb-devices').textContent = devices.length + ' devices';
                    document.getElementById('usb-indicator').classList.add('port-connected');
                }).catch(() => {
                    document.getElementById('usb-devices').textContent = 'Permission needed';
                });
            } else {
                document.getElementById('usb-devices').textContent = 'Not supported';
            }

            // Bluetooth
            if ('bluetooth' in navigator) {
                navigator.bluetooth.getAvailability().then(available => {
                    document.getElementById('bluetooth-status').textContent = available ? 'Available' : 'Not available';
                    if (available) document.getElementById('bluetooth-indicator').classList.add('port-connected');
                });
            } else {
                document.getElementById('bluetooth-status').textContent = 'Not supported';
            }

            // Network
            document.getElementById('network-status').textContent = navigator.onLine ? 'Connected' : 'Disconnected';
            if (navigator.onLine) {
                document.getElementById('network-indicator').classList.add('port-connected');
            } else {
                document.getElementById('network-indicator').classList.remove('port-connected');
            }

            // Audio Devices
            if ('mediaDevices' in navigator && 'enumerateDevices' in navigator.mediaDevices) {
                navigator.mediaDevices.enumerateDevices().then(devices => {
                    const audioInputs = devices.filter(d => d.kind === 'audioinput');
                    const audioOutputs = devices.filter(d => d.kind === 'audiooutput');
                    document.getElementById('audio-devices').textContent = `${audioInputs.length} in / ${audioOutputs.length} out`;
                    if (audioInputs.length + audioOutputs.length > 0) {
                        document.getElementById('audio-indicator').classList.add('port-connected');
                    }
                });
            } else {
                document.getElementById('audio-devices').textContent = 'Not supported';
            }
        }
    </script>
</body>
</html>